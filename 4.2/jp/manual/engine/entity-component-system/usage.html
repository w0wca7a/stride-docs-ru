<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>ECS Usage | Stride Manual </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="ECS Usage | Stride Manual ">
      
      
      <link rel="icon" href="../../../favicon.ico">
      <link rel="stylesheet" href="../../../public/docfx.min.css">
      <link rel="stylesheet" href="../../../public/main.css">
      <meta name="docfx:navrel" content="../../../toc.html">
      <meta name="docfx:tocrel" content="../../toc.html">
      
      <meta name="docfx:rel" content="../../../">
      
      
      <meta name="docfx:docurl" content="https://github.com/stride3d/stride-docs/blob/master/en/manual/engine/entity-component-system/usage.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../../../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="https://www.stride3d.net/">
            <img id="logo" class="svg" src="../../../media/stride-logo-red.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled="" placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="ecs-usage">ECS Usage</h1>

<div class="WARNING">
<h5>Warning</h5>
<p>申し訳ありません。このページの日本語訳はございません。英語で表示いたします。</p>
</div>
<h2 id="classes">Classes</h2>
<p>The three parts of <strong>Entity Component System</strong> map to the following classes:</p>
<ul>
<li>Entity - <a class="xref" href="../../../api/Stride.Engine.Entity.html"><code>Stride.Engine.Entity</code></a></li>
<li>Component - <a class="xref" href="../../../api/Stride.Engine.EntityComponent.html"><code>Stride.Engine.EntityComponent</code></a></li>
<li>System - <a class="xref" href="../../../api/Stride.Engine.EntityProcessor.html"><code>Stride.Engine.EntityProcessor</code></a></li>
</ul>
<h2 id="minimal-setup">Minimal Setup</h2>
<p>A component can be defined by deriving a class from <code>EntityComponent</code>. By adding the attribute <code>DefaultEntityComponentProcessor</code> to an <code>EntityComponent</code>, an <code>EntityProcessor</code> can be assigned to it. This will automatically set up and run the <code>EntityProcessor</code> if the <code>EntityComponent</code> is in the scene. An <code>EntityComponent</code> also needs to indicate that it can be serialized by adding the attribute <code>DataContract</code> to it. A system can be defined by deriving a class from <code>EntityProcessor</code>.</p>
<h3 id="code">Code</h3>
<h4 id="component">Component</h4>
<pre><code class="lang-csharp">[DataContract(nameof(MyComponent))]
[DefaultEntityComponentProcessor(typeof(MyProcessor))]
public class MyComponent : EntityComponent
{
    public int MyValue { get; set; }
}
</code></pre>
<h4 id="system">System</h4>
<pre><code class="lang-csharp">public class MyProcessor : EntityProcessor&lt;MyComponent&gt;
{
    public override void Update(GameTime time)
    {
        foreach (var myComponent in ComponentDatas.Values)
        {
            Console.WriteLine($&quot;myComponent with value {myComponent.MyValue} at {time.Total.TotalSeconds}&quot;);
        }
    }
}
</code></pre>
<h3 id="additional-note">Additional Note</h3>
<p>An <code>EntityComponent</code> can currently not be drag-dropped onto an entity in Game Studio. It has to be added by selecting an entity, and then clicking the <strong>Add component</strong> button<br>
in the <strong>Property grid</strong>. Alternatively, this can also be done in <a href="https://doc.stride3d.net/latest/en/api/Stride.Engine.Entity.html#Stride_Engine_Entity_Add_Stride_Engine_EntityComponent_">code via <code>entity.Add(entityComponent)</code></a>.</p>
<h2 id="advanced-features">Advanced Features</h2>
<h3 id="more-component-attributes">More Component Attributes</h3>
<h4 id="display">Display</h4>
<p>By adding the <code>Display</code> attribute, a nicer name can be shown in Game Studio.</p>
<pre><code class="lang-csharp">[Display(&quot;My better name&quot;)]
</code></pre>
<h4 id="componentcategory">ComponentCategory</h4>
<p>By default, your components will be listed in the category &quot;Miscellaneous&quot;. By adding the <code>ComponentCategory</code> attribute, a different category can be chosen. If the chosen name does not exist yet, it will be added to the list in Game Studio.</p>
<pre><code class="lang-csharp">[ComponentCategory(&quot;My own components&quot;)]
</code></pre>
<h4 id="componentorder">ComponentOrder</h4>
<p>By adding the <code>ComponentOrder</code> attribute, the order in which components are listed in Game Studio can be changed.</p>
<pre><code class="lang-csharp">[ComponentOrder(2001)]
</code></pre>
<h3 id="component-combinations">Component Combinations</h3>
<p>By passing the types of other components to the <code>EntityProcessor</code> constructor, it will only include entities <em>that also have those other components</em>. For example, the following <code>EntityProcessor</code> is for <code>MyComponent</code>, but will skip any entity that does not also have both <code>TransformComponent</code> and <code>AnimationComponent</code> on it.</p>
<pre><code class="lang-csharp">public class MyProcessor : EntityProcessor&lt;MyComponent&gt;
{
    public MyProcessor() : base(typeof(TransformComponent), typeof(AnimationComponent))
    {
    }
}
</code></pre>
<h3 id="non-default-processors">Non-default Processors</h3>
<p>Adding processors for a type of component via the attribute <code>DefaultEntityComponentProcessor</code> has been explained above. However, as the name implies, this is for the <em>default</em> processor. Non-default processors can also be added via</p>
<pre><code class="lang-csharp">SceneSystem.SceneInstance.Processors.Add(entityProcessor);
</code></pre>
<h3 id="separation-of-entitycomponent-and-data">Separation of EntityComponent and Data</h3>
<p><code>EntityProcessor&lt;TComponent&gt;</code> is a shortcut for <code>EntityProcessor&lt;TComponent, TComponent&gt;</code>. By explicitly using <code>EntityProcessor&lt;TComponent, TData&gt;</code> instead, a different type can be chosen for the actual data. This way, the <code>EntityComponent</code> can e.g. have &quot;heavier&quot; startup data and references, while the data object that needs to be processed every frame can be kept small. This will require overriding a method <code>GenerateComponentData</code>, which produces a <code>TData</code> instance from a <code>TComponent</code> instance.</p>
<h3 id="overrides">Overrides</h3>
<p><code>EntityProcessor</code> also provides several methods which can be overridden in order to react to certain events. They are not overly complicated, so that their usage should be clear from their doc comments.</p>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/stride3d/stride-docs/blob/master/en/manual/engine/entity-component-system/usage.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <div class="d-flex flex-column flex-sm-row justify-content-between pt-1 text-center small"><p>Supported by the <a href="https://dotnetfoundation.org/" target="_blank" rel="noopener">.NET Foundation</a></p><p>Made with <a href="https://dotnet.github.io/docfx">docfx</a></p><p>Stride Docs Website v.2.0.0.1</p><p>&copy; .NET Foundation and Contributors</p></div>
        </div>
      </div>
    </footer>
  </body>
</html>
