<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>シェーダー ステージ | Stride Manual </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="シェーダー ステージ | Stride Manual ">
      
      
      <link rel="icon" href="../../../../favicon.ico">
      <link rel="stylesheet" href="../../../../public/docfx.min.css">
      <link rel="stylesheet" href="../../../../public/main.css">
      <meta name="docfx:navrel" content="../../../../toc.html">
      <meta name="docfx:tocrel" content="../../../toc.html">
      
      <meta name="docfx:rel" content="../../../../">
      
      
      <meta name="docfx:docurl" content="https://github.com/stride3d/stride-docs/blob/master/jp/manual/graphics/effects-and-shaders/shading-language/shader-stages.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../../../../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="https://www.stride3d.net/">
            <img id="logo" class="svg" src="../../../../media/stride-logo-red.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled="" placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="シェーダー-ステージ">シェーダー ステージ</h1>

<!--
# Shader stages
-->
<p>シェーダーステージ関数にはあらかじめ定められた名前がついているので、変更しないことをお勧めします。</p>
<!--
The function for each stage has a predefined name, so we recommend you don't change it.
-->
<ul>
<li><code>HSMain</code>：ハルシェーダー</li>
<li><code>HSConstantMain</code>： パッチ定数関数</li>
<li><code>DSMain</code>：ドメインシェーダー</li>
<li><code>VSMain</code>：頂点シェーダー（引数はありません）</li>
<li><code>GSMain</code>：ジオメトリシェーダー</li>
<li><code>PSMain</code>：ピクセルシェーダー（引数はありません）</li>
<li><code>CSMain</code>：コンピュートシェーダー（引数はありません）</li>
</ul>
<!--
- `HSMain` for hull shader
- `HSConstantMain` for patch constant function
- `DSMain` for domain shader
- `VSMain` for vertex shader (takes no arguments)
- `GSMain` for geometry shader
- `PSMain` for pixel shader (takes no arguments)
- `CSMain` for compute shader (takes no arguments)
-->
<p>これらの関数の型はすべて void です。</p>
<!--
These are all void methods.
-->
<p>ジオメトリシェーダーとテッセレーションシェーダーは、入力と出力のために、何らかの構造体を定義する必要があります。しかし、Stride のシェーダーは一般的なものなので、どのような構造になるかを事前に知ることはできません。そのため、これらのシェーダーでは、最終的なシェーダーに合わせて自動的に生成される <code>Input</code> 構造体と <code>Output</code> 構造体を使います。</p>
<!--
The geometry and tessellation shaders need some kind of predefined structure as input and output. However, since Stride shaders are generic, it's impossible to know beforehand what the structure will be. As a result, these shaders use `Input` and `Output` structures that are automatically generated to fit the final shader.
-->
<h2 id="頂点シェーダー">頂点シェーダー</h2>
<!--
## Vertex shader
-->
<p>頂点シェーダーは、<code>SV_Position</code> セマンティックを使って変数を設定します。
<code>ShaderBase</code> では、<code>ShadingPosition</code> がそれに当たります。</p>
<!--
A vertex shader has to set the variable with the semantic `SV_Position`. In `ShaderBase`, it's `ShadingPosition`.
-->
<p>例：</p>
<!--
For example:
-->
<pre><code class="lang-cs">override stage void VSMain()
{
	...
	streams.ShadingPosition = ...;
	...
}
</code></pre>
<h2 id="ピクセルシェーダー">ピクセルシェーダー</h2>
<!--
## Pixel shader
-->
<p>ピクセルシェーダーは、<code>SV_Target</code> セマンティックを使って変数を設定します。
<code>ShaderBase</code> では、<code>ColorTarget</code> がそれに当たります。</p>
<!--
A pixel shader has to set the variable with the semantic `SV_Target`. In `ShaderBase`, it is `ColorTarget`.
-->
<p>例：</p>
<!--
For example:
-->
<pre><code class="lang-cs">override stage void PSMain()
{
	...
	streams.ColorTarget = ...;
	...
}
</code></pre>
<h2 id="ジオメトリシェーダー">ジオメトリシェーダー</h2>
<!--
## Geometry shader
-->
<p>ジオメトリシェーダーの例：</p>
<!--
An example of geometry shader:
-->
<pre><code class="lang-cs">[maxvertexcount(1)]
void GSMain(triangle Input input[3], inout PointStream&lt;Output&gt; pointStream)
{
	...
	// ストリームオブジェクトを充填します。
	// fill the streams object
	streams = input[0];
 	...
 
	// 常に ストリームを追加します。
	// always append streams
	pointStream.Append(streams);
	...
}
</code></pre>
<p><code>Input</code> はメソッド本体で使うことができます。これはストリームオブジェクトと同じように動作し、同じメンバーを持っています。</p>
<!--
`Input` can be used in the method body. It behaves like the streams object and contains the same members.
-->
<p><code>Output</code> はメソッドの宣言でのみ使うことができます。ストリームオブジェクトをジオメトリシェーダーの出力ストリームに追加する必要があります。</p>
<!--
`Output` is only used in the declaration of the method. You should append the streams object to your geometry shader output stream.
-->
<h2 id="テッセレーションシェーダー">テッセレーションシェーダー</h2>
<!--
## Tessellation shader
-->
<p>テッセレーションシェーダーの例：</p>
<!--
An example of a tessellation shader:
-->
<pre><code class="lang-cs">[domain(&quot;tri&quot;)]
[partitioning(&quot;fractional_odd&quot;)]
[outputtopology(&quot;triangle_cw&quot;)]
[outputcontrolpoints(3)]
[patchconstantfunc(&quot;HSConstantMain&quot;)]
[maxtessfactor(48.0)]
void HSMain(InputPatch&lt;Input, 3&gt; input, out Output output, uint uCPID : SV_OutputControlPointID)
{
	...
	output = streams;
}
 
void HSConstantMain(InputPatch&lt;Input, 3&gt; input, const OutputPatch&lt;Input2, 3&gt; output, out Constants constants)
{
	...
	output = streams;
	...
}
 
[domain(&quot;tri&quot;)]
void DSMain(const OutputPatch&lt;Input, 3&gt; input, out Output output, in Constants constants, float3 f3BarycentricCoords : SV_DomainLocation)
{
	...
	output = streams;
	...
}
</code></pre>
<p><code>Input</code> と <code>Input2</code> はどちらも、ストリームのように振る舞います。</p>
<!--
`Input` and `Input2` both behave like streams.
-->
<div class="NOTE">
<h5>Note</h5>
<p>ステージの最後で、<code>output</code> を <code>streams</code> に割り当てることを忘れないでください。</p>
</div>
<!--
>[!Note]
>Don't forget to assign `output` to `streams` at the end of your stage.
-->
<h2 id="コンピュートシェーダー">コンピュートシェーダー</h2>
<!--
## Compute shader
-->
<p>コンピュートシェーダーの例：</p>
<!--
An example of a compute shader:
-->
<pre><code class="lang-cs">[numthreads(2, 3, 5)]
void CSMain()
{
	...
}
</code></pre>
<p><code>ComputeShaderBase</code> を継承して、<code>Compute</code> メソッドをオーバーライドすることができます。</p>
<!--
You can inherit from `ComputeShaderBase` and override the `Compute` method.
-->
<h2 id="関連項目">関連項目</h2>
<!--
## See also
-->
<ul>
<li><a href="../effect-language.html">エフェクト言語</a></li>
<li><a href="index.html">シェーディング言語</a>
<ul>
<li><a href="shader-classes-mixins-and-inheritance.html">シェーダークラス、ミックスイン、継承</a></li>
<li><a href="composition.html">コンポジション</a></li>
<li><a href="templates.html">テンプレート</a></li>
<li><a href="automatic-shader-stage-input-output.html">シェーダー ステージ入出力の自動管理</a></li>
</ul>
</li>
</ul>
<!--
* [Effect language](../effect-language.md)
* [Shading language index](index.md)
    - [Shader classes, mixins, and inheritance](shader-classes-mixins-and-inheritance.md)
    - [Composition](composition.md)
    - [Templates](templates.md)
    - [Shader stage input/output automatic management](automatic-shader-stage-input-output.md)
-->

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/stride3d/stride-docs/blob/master/jp/manual/graphics/effects-and-shaders/shading-language/shader-stages.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <div class="d-flex flex-column flex-sm-row justify-content-between pt-1 text-center small"><p>Supported by the <a href="https://dotnetfoundation.org/" target="_blank" rel="noopener">.NET Foundation</a></p><p>Made with <a href="https://dotnet.github.io/docfx">docfx</a></p><p>Stride Docs Website v.2.0.0.1</p><p>&copy; .NET Foundation and Contributors</p></div>
        </div>
      </div>
    </footer>
  </body>
</html>
