<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Shader stages | Stride Manual </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Shader stages | Stride Manual ">
      
      
      <link rel="icon" href="../../../../favicon.ico">
      <link rel="stylesheet" href="../../../../public/docfx.min.css">
      <link rel="stylesheet" href="../../../../public/main.css">
      <meta name="docfx:navrel" content="../../../../toc.html">
      <meta name="docfx:tocrel" content="../../../toc.html">
      
      <meta name="docfx:rel" content="../../../../">
      
      
      <meta name="docfx:docurl" content="https://github.com/stride3d/stride-docs/blob/master/en/manual/graphics/effects-and-shaders/shading-language/shader-stages.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../../../../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="https://www.stride3d.net/">
            <img id="logo" class="svg" src="../../../../media/stride-logo-red.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled="" placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="shader-stages">Shader stages</h1>

<p>The function for each stage has a predefined name, so we recommend you don't change it.</p>
<ul>
<li><code>HSMain</code> for hull shader</li>
<li><code>HSConstantMain</code> for patch constant function</li>
<li><code>DSMain</code> for domain shader</li>
<li><code>VSMain</code> for vertex shader (takes no arguments)</li>
<li><code>GSMain</code> for geometry shader</li>
<li><code>PSMain</code> for pixel shader (takes no arguments)</li>
<li><code>CSMain</code> for compute shader (takes no arguments)</li>
</ul>
<p>These are all void methods.</p>
<p>The geometry and tessellation shaders need some kind of predefined structure as input and output. However, since Stride shaders are generic, it's impossible to know beforehand what the structure will be. As a result, these shaders use <code>Input</code> and <code>Output</code> structures that are automatically generated to fit the final shader.</p>
<h2 id="vertex-shader">Vertex shader</h2>
<p>A vertex shader has to set the variable with the semantic <code>SV_Position</code>. In <code>ShaderBase</code>, it's <code>ShadingPosition</code>.</p>
<p>For example:</p>
<pre><code class="lang-cs">override stage void VSMain()
{
	...
	streams.ShadingPosition = ...;
	...
}
</code></pre>
<h2 id="pixel-shader">Pixel shader</h2>
<p>A pixel shader has to set the variable with the semantic <code>SV_Target</code>. In <code>ShaderBase</code>, it is <code>ColorTarget</code>.</p>
<p>For example:</p>
<pre><code class="lang-cs">override stage void PSMain()
{
	...
	streams.ColorTarget = ...;
	...
}
</code></pre>
<h2 id="geometry-shader">Geometry shader</h2>
<p>An example of geometry shader:</p>
<pre><code class="lang-cs">[maxvertexcount(1)]
void GSMain(triangle Input input[3], inout PointStream&lt;Output&gt; pointStream)
{
	...
	// fill the streams object
	streams = input[0];
 	...
 
	// always append streams
	pointStream.Append(streams);
	...
}
</code></pre>
<p><code>Input</code> can be used in the method body. It behaves like the streams object and contains the same members.</p>
<p><code>Output</code> is only used in the declaration of the method. You should append the streams object to your geometry shader output stream.</p>
<h2 id="tessellation-shader">Tessellation shader</h2>
<p>An example of a tessellation shader:</p>
<pre><code class="lang-cs">[domain(&quot;tri&quot;)]
[partitioning(&quot;fractional_odd&quot;)]
[outputtopology(&quot;triangle_cw&quot;)]
[outputcontrolpoints(3)]
[patchconstantfunc(&quot;HSConstantMain&quot;)]
[maxtessfactor(48.0)]
void HSMain(InputPatch&lt;Input, 3&gt; input, out Output output, uint uCPID : SV_OutputControlPointID)
{
	...
	output = streams;
}
 
void HSConstantMain(InputPatch&lt;Input, 3&gt; input, const OutputPatch&lt;Input2, 3&gt; output, out Constants constants)
{
	...
	output = streams;
	...
}
 
[domain(&quot;tri&quot;)]
void DSMain(const OutputPatch&lt;Input, 3&gt; input, out Output output, in Constants constants, float3 f3BarycentricCoords : SV_DomainLocation)
{
	...
	output = streams;
	...
}
</code></pre>
<p><code>Input</code> and <code>Input2</code> both behave like streams.</p>
<div class="NOTE">
<h5>Note</h5>
<p>Don't forget to assign <code>output</code> to <code>streams</code> at the end of your stage.</p>
</div>
<h2 id="compute-shader">Compute shader</h2>
<p>An example of a compute shader:</p>
<pre><code class="lang-cs">[numthreads(2, 3, 5)]
void CSMain()
{
	...
}
</code></pre>
<p>You can inherit from <code>ComputeShaderBase</code> and override the <code>Compute</code> method.</p>
<h2 id="see-also">See also</h2>
<ul>
<li><a href="../effect-language.html">Effect language</a></li>
<li><a href="index.html">Shading language index</a>
<ul>
<li><a href="shader-classes-mixins-and-inheritance.html">Shader classes, mixins, and inheritance</a></li>
<li><a href="composition.html">Composition</a></li>
<li><a href="templates.html">Templates</a></li>
<li><a href="automatic-shader-stage-input-output.html">Shader stage input/output automatic management</a></li>
</ul>
</li>
</ul>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/stride3d/stride-docs/blob/master/en/manual/graphics/effects-and-shaders/shading-language/shader-stages.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <div class="d-flex flex-column flex-sm-row justify-content-between pt-1 text-center small"><p>Supported by the <a href="https://dotnetfoundation.org/" target="_blank" rel="noopener">.NET Foundation</a></p><p>Made with <a href="https://dotnet.github.io/docfx">docfx</a></p><p>Stride Docs Website v.2.0.0.4</p><p>&copy; .NET Foundation and Contributors</p></div>
        </div>
      </div>
    </footer>
  </body>
</html>
