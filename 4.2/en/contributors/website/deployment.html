<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Website deployment | Stride Contributors </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Website deployment | Stride Contributors ">
      
      
      <link rel="icon" href="../../favicon.ico">
      <link rel="stylesheet" href="../../public/docfx.min.css">
      <link rel="stylesheet" href="../../public/main.css">
      <meta name="docfx:navrel" content="../../toc.html">
      <meta name="docfx:tocrel" content="../toc.html">
      
      <meta name="docfx:rel" content="../../">
      
      
      <meta name="docfx:docurl" content="https://github.com/stride3d/stride-docs/blob/master/en/contributors/website/deployment.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="https://www.stride3d.net/">
            <img id="logo" class="svg" src="../../media/stride-logo-red.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled="" placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="website-deployment">Website deployment</h1>

<p>We tested five different deployment methods (GitHub Pages, Azure Web App Windows/Linux IIS/Kestrel, Azure Static Web Apps) and chose to continue with the existing Azure Web Apps IIS ASP.NET 4.8 infrastructure.</p>
<ul>
<li><a href="#azure-web-apps">Azure Web Apps</a>
<ul>
<li><a href="#deploying-with-net-framework">Deploying with .NET Framework</a></li>
</ul>
</li>
<li><a href="#deployment-to-wiki">Deployment To Wiki</a></li>
<li><a href="#deployment-tests">Deployment Tests</a></li>
</ul>
<h1 id="azure-web-apps">Azure Web Apps</h1>
<h2 id="deploying-with-net-framework">Deploying with .NET Framework</h2>
<p>The .NET Framework uses IIS to host the website, which serves any static files.</p>
<p>The <a href="https://github.com/stride3d/stride-website/blob/master/web.config">web.config</a> file is used to configure IIS, including:</p>
<ul>
<li>Mime types for static files</li>
<li>Redirects</li>
<li>Gzip compression</li>
<li>Static file caching</li>
<li>Custom Headers</li>
<li>Custom 404</li>
<li>Caching</li>
</ul>
<p>The GitHub action <a href="https://github.com/stride3d/stride-website/blob/master/.github/workflows/stride-website-release-azure.yml">stride-website-release-azure.yml</a> builds the website and deploys it to Azure Web Apps.</p>
<p><a href="deployment-azure.html">Step-by-Step Deployment Guide for Azure Web Apps (Windows) with IIS and Stride Website</a>.</p>
<h1 id="deployment-to-wiki">Deployment To Wiki</h1>
<p>While the GitHub wiki offers a convenient way to document a project, it has some drawbacks, such as not being part of the repository by default and restricting edits to collaborators. To address these issues and allow community editing, we have implemented an alternative approach.</p>
<p>We created a <code>wiki</code> folder within the repository, which contains all wiki pages. The GitHub action <code>stride-web-wiki.yml</code> deploys the <code>wiki</code> folder to the GitHub wiki.</p>
<p>The GitHub action <a href="https://github.com/stride3d/stride-website/blob/master/.github/workflows/stride-website-wiki.yml">stride-website-wiki.yml</a> is triggered when:</p>
<ol>
<li>A push/merge is made to the <code>master</code> branch of the <code>stride-website</code> repository</li>
<li>The action is manually triggered</li>
</ol>
<p>You can manually trigger the action by navigating to the <strong>Actions</strong> tab and clicking the <strong>Run workflow</strong> button.</p>
<p>This GitHub action only monitors changes to the <code>wiki</code> folder. Any modifications made to the <code>wiki</code> folder will be deployed to the GitHub wiki. Note that changes to the <code>wiki</code> folder will not trigger other GitHub actions.</p>
<p>We use the <a href="https://github.com/marketplace/actions/wiki-page-creator-action">Wiki Page Creator GitHub Action</a> to deploy the <code>wiki</code> folder to the GitHub wiki.</p>
<p><strong>Note</strong>: ⚠️ A GitHub personal access fine-grained token (GH_PAT) is required for authentication. This token is stored as a secret in the repository settings.⚠️</p>
<h1 id="deployment-tests">Deployment Tests</h1>
<p>Tests were discussed here <a href="https://github.com/stride3d/stride-website/issues/71">https://github.com/stride3d/stride-website/issues/71</a></p>
<p>The basic <strong>load tests</strong> we conducted by measuring the <code>/blog/</code> page for different deployment scenarios. We only performed 1-2 tests, as this process is time-consuming and likely unnecessary:</p>
<ul>
<li>Hardware for Azure App Service: Basic B1, 1 CPU, 1.75 Memory, CPU type unknown, most likely different for Windows and Linux</li>
<li>Hardware for GitHub Pages: Unknown</li>
<li>Test was running 60 seconds, 2 threads</li>
</ul>
<p><strong>Results</strong></p>
<ol>
<li>GitHup Pages - <strong>737 req/sec</strong>
<ul>
<li>We have no control over various aspects, including security headers, redirects, and caching.</li>
</ul>
</li>
<li>ASP.NET 4.8 with IIS - <strong>186 req/sec</strong>
<ul>
<li>We have full control of everything through <code>web.config</code>, including security headers, redirects, caching, ..</li>
</ul>
</li>
<li>SWA (Static Web App - Paid) - <strong>160 req/sec</strong>
<ul>
<li>No familiar with but should be fair enough control through <code>staticwebapp.config.json</code></li>
</ul>
</li>
<li>.NET 7 (Windows) with IIS (in-process) - <strong>127 req/sec</strong>
<ul>
<li>We have full control of everything through <code>web.config</code>, including security headers, redirects, caching, ..</li>
</ul>
</li>
<li>.NET 7 (Windows) with Kestrel (out-of-process) - <strong>88 req/sec</strong>
<ul>
<li>We have full control of everything through ASP.NET Core middleware, including security headers, redirects, caching, ..</li>
</ul>
</li>
<li>.NET 7 (Linux) with Kestrel - *<strong>38 req/sec</strong>
<ul>
<li>We have full control of everything through ASP.NET Core middleware, including security headers, redirects, caching, ..</li>
</ul>
</li>
</ol>
<p><strong>*</strong> I believe that Linux was slow due to the Azure App Service configuration, where Linux performance is purposely lower but also cheaper.</p>
<p><strong>Recommendation</strong></p>
<ol>
<li><strong>ASP.NET 4.8 with IIS</strong> for Staging</li>
<li><strong>ASP.NET 4.8 with IIS</strong> for Release</li>
</ol>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/stride3d/stride-docs/blob/master/en/contributors/website/deployment.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <div class="d-flex flex-column flex-sm-row justify-content-between pt-1 text-center small"><p>Supported by the <a href="https://dotnetfoundation.org/" target="_blank" rel="noopener">.NET Foundation</a></p><p>Made with <a href="https://dotnet.github.io/docfx">docfx</a></p><p>Stride Docs Website v.2.0.0.1</p><p>&copy; .NET Foundation and Contributors</p></div>
        </div>
      </div>
    </footer>
  </body>
</html>
