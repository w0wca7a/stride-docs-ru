<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Class ParticleMaterial | Stride Docs </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Class ParticleMaterial | Stride Docs ">
      
      <meta name="description" content="Base class for the particle materials which uses a dynamic effect compiler to generate shaders at runtime">
      <link rel="icon" href="../favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      <meta name="docfx:docurl" content="https://github.com/stride3d/stride-docs/new/master/apiSpec/new?filename=Stride_Particles_Materials_ParticleMaterial.md&amp;value=---%0Auid%3A%20Stride.Particles.Materials.ParticleMaterial%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="ManagedReference">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="https://www.stride3d.net/">
            <img id="logo" class="svg" src="../media/stride-logo-red.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled="" placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="Stride.Particles.Materials.ParticleMaterial">



  <h1 id="Stride_Particles_Materials_ParticleMaterial" data-uid="Stride.Particles.Materials.ParticleMaterial" class="text-break">
Class ParticleMaterial  <a class="header-action link-secondary" title="View source" href="https://github.com/stride3d/stride/blob/locale-ru/sources/engine/Stride.Particles/Materials/ParticleMaterial.cs/#L17"><i class="bi bi-code-slash"></i></a>
  </h1>

  <div class="facts text-secondary">
    <dl><dt>Namespace</dt><dd><a class="xref" href="Stride.html">Stride</a>.<a class="xref" href="Stride.Particles.html">Particles</a>.<a class="xref" href="Stride.Particles.Materials.html">Materials</a></dd></dl>
  <dl><dt>Assembly</dt><dd>Stride.Particles.dll</dd></dl>
  </div>

  <div class="markdown summary"><p>Base class for the particle materials which uses a dynamic effect compiler to generate shaders at runtime</p>
</div>
  <div class="markdown conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">[DataContract(&quot;ParticleMaterial&quot;)]
public abstract class ParticleMaterial</code></pre>
  </div>




  <dl class="typelist inheritance">
    <dt>Inheritance</dt>
    <dd>
      <div><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object">object</a></div>
      <div><span class="xref">ParticleMaterial</span></div>
    </dd>
  </dl>


  <dl class="typelist derived">
    <dt>Derived</dt>
    <dd>
      <div><a class="xref" href="Stride.Particles.Materials.ParticleMaterialSimple.html">ParticleMaterialSimple</a></div>
    </dd>
  </dl>







  <h2 class="section" id="fields">Fields
</h2>



  <h3 id="Stride_Particles_Materials_ParticleMaterial_Parameters" data-uid="Stride.Particles.Materials.ParticleMaterial.Parameters">
  Parameters
  <a class="header-action link-secondary" title="View source" href="https://github.com/stride3d/stride/blob/locale-ru/sources/engine/Stride.Particles/Materials/ParticleMaterial.cs/#L21"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"></div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public readonly ParameterCollection Parameters</code></pre>
  </div>




  <h4 class="section">Field Value</h4>
  <dl class="parameters">
    <dt><a class="xref" href="Stride.Rendering.ParameterCollection.html">ParameterCollection</a></dt>
    <dd></dd>
  </dl>









  <h2 class="section" id="properties">Properties
</h2>


  <a id="Stride_Particles_Materials_ParticleMaterial_EffectName_" data-uid="Stride.Particles.Materials.ParticleMaterial.EffectName*"></a>

  <h3 id="Stride_Particles_Materials_ParticleMaterial_EffectName" data-uid="Stride.Particles.Materials.ParticleMaterial.EffectName">
  EffectName
  <a class="header-action link-secondary" title="View source" href="https://github.com/stride3d/stride/blob/locale-ru/sources/engine/Stride.Particles/Materials/ParticleMaterial.cs/#L38"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Sets the name of the effect or shader which the material will use</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public abstract string EffectName { get; protected set; }</code></pre>
  </div>





  <h4 class="section">Property Value</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></dt>
    <dd></dd>
  </dl>








  <a id="Stride_Particles_Materials_ParticleMaterial_HasVertexLayoutChanged_" data-uid="Stride.Particles.Materials.ParticleMaterial.HasVertexLayoutChanged*"></a>

  <h3 id="Stride_Particles_Materials_ParticleMaterial_HasVertexLayoutChanged" data-uid="Stride.Particles.Materials.ParticleMaterial.HasVertexLayoutChanged">
  HasVertexLayoutChanged
  <a class="header-action link-secondary" title="View source" href="https://github.com/stride3d/stride/blob/locale-ru/sources/engine/Stride.Particles/Materials/ParticleMaterial.cs/#L32"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Indicates if the vertex layout required by this material has changed since the last time <a class="xref" href="Stride.Particles.Materials.ParticleMaterial.html#Stride_Particles_Materials_ParticleMaterial_UpdateVertexBuilder_Stride_Particles_VertexLayouts_ParticleVertexBuilder_">UpdateVertexBuilder(ParticleVertexBuilder)</a> was called</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public bool HasVertexLayoutChanged { get; protected set; }</code></pre>
  </div>





  <h4 class="section">Property Value</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.boolean">bool</a></dt>
    <dd></dd>
  </dl>








  <a id="Stride_Particles_Materials_ParticleMaterial_IsInitialized_" data-uid="Stride.Particles.Materials.ParticleMaterial.IsInitialized*"></a>

  <h3 id="Stride_Particles_Materials_ParticleMaterial_IsInitialized" data-uid="Stride.Particles.Materials.ParticleMaterial.IsInitialized">
  IsInitialized
  <a class="header-action link-secondary" title="View source" href="https://github.com/stride3d/stride/blob/locale-ru/sources/engine/Stride.Particles/Materials/ParticleMaterial.cs/#L26"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>True if <a class="xref" href="Stride.Particles.Materials.ParticleMaterial.html#Stride_Particles_Materials_ParticleMaterial_InitializeCore_Stride_Rendering_RenderContext_">InitializeCore(RenderContext)</a> has been called</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">protected bool IsInitialized { get; }</code></pre>
  </div>





  <h4 class="section">Property Value</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.boolean">bool</a></dt>
    <dd></dd>
  </dl>








  <h2 class="section" id="methods">Methods
</h2>


  <a id="Stride_Particles_Materials_ParticleMaterial_ForceUpdate_" data-uid="Stride.Particles.Materials.ParticleMaterial.ForceUpdate*"></a>

  <h3 id="Stride_Particles_Materials_ParticleMaterial_ForceUpdate" data-uid="Stride.Particles.Materials.ParticleMaterial.ForceUpdate">
  ForceUpdate()
  <a class="header-action link-secondary" title="View source" href="https://github.com/stride3d/stride/blob/locale-ru/sources/engine/Stride.Particles/Materials/ParticleMaterial.cs/#L81"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Forces the material update, potentionally recreating the effect</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual void ForceUpdate()</code></pre>
  </div>













  <a id="Stride_Particles_Materials_ParticleMaterial_InitializeCore_" data-uid="Stride.Particles.Materials.ParticleMaterial.InitializeCore*"></a>

  <h3 id="Stride_Particles_Materials_ParticleMaterial_InitializeCore_Stride_Rendering_RenderContext_" data-uid="Stride.Particles.Materials.ParticleMaterial.InitializeCore(Stride.Rendering.RenderContext)">
  InitializeCore(RenderContext)
  <a class="header-action link-secondary" title="View source" href="https://github.com/stride3d/stride/blob/locale-ru/sources/engine/Stride.Particles/Materials/ParticleMaterial.cs/#L111"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Initializes the core of the material, such as the shader generator and the parameter collection</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">protected virtual void InitializeCore(RenderContext context)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>context</code> <a class="xref" href="Stride.Rendering.RenderContext.html">RenderContext</a></dt>
    <dd><p>The current <a class="xref" href="Stride.Rendering.RenderContext.html">RenderContext</a></p>
</dd>
  </dl>












  <a id="Stride_Particles_Materials_ParticleMaterial_PatchVertexBuffer_" data-uid="Stride.Particles.Materials.ParticleMaterial.PatchVertexBuffer*"></a>

  <h3 id="Stride_Particles_Materials_ParticleMaterial_PatchVertexBuffer_Stride_Particles_VertexLayouts_ParticleBufferState__Stride_Core_Mathematics_Vector3_Stride_Core_Mathematics_Vector3_Stride_Particles_Sorters_ParticleList__" data-uid="Stride.Particles.Materials.ParticleMaterial.PatchVertexBuffer(Stride.Particles.VertexLayouts.ParticleBufferState@,Stride.Core.Mathematics.Vector3,Stride.Core.Mathematics.Vector3,Stride.Particles.Sorters.ParticleList@)">
  PatchVertexBuffer(ref ParticleBufferState, Vector3, Vector3, ref ParticleList)
  <a class="header-action link-secondary" title="View source" href="https://github.com/stride3d/stride/blob/locale-ru/sources/engine/Stride.Particles/Materials/ParticleMaterial.cs/#L103"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Patch the particle's vertex buffer which was already built by the <a class="xref" href="Stride.Particles.ShapeBuilders.ShapeBuilder.html">ShapeBuilder</a>
This involes animating hte uv coordinates and filling per-particle fields, such as the color field</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual void PatchVertexBuffer(ref ParticleBufferState bufferState, Vector3 invViewX, Vector3 invViewY, ref ParticleList sortedList)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>bufferState</code> <a class="xref" href="Stride.Particles.VertexLayouts.ParticleBufferState.html">ParticleBufferState</a></dt>
    <dd><p>The particle buffer state which is used to build the assigned vertex buffer</p>
</dd>
    <dt><code>invViewX</code> <a class="xref" href="Stride.Core.Mathematics.Vector3.html">Vector3</a></dt>
    <dd><p>Unit vector X (right) in camera space, extracted from the inverse view matrix</p>
</dd>
    <dt><code>invViewY</code> <a class="xref" href="Stride.Core.Mathematics.Vector3.html">Vector3</a></dt>
    <dd><p>Unit vector Y (up) in camera space, extracted from the inverse view matrix</p>
</dd>
    <dt><code>sortedList</code> <a class="xref" href="Stride.Particles.Sorters.ParticleList.html">ParticleList</a></dt>
    <dd></dd>
  </dl>












  <a id="Stride_Particles_Materials_ParticleMaterial_PrepareVertexLayout_" data-uid="Stride.Particles.Materials.ParticleMaterial.PrepareVertexLayout*"></a>

  <h3 id="Stride_Particles_Materials_ParticleMaterial_PrepareVertexLayout_Stride_Particles_ParticlePoolFieldsList_" data-uid="Stride.Particles.Materials.ParticleMaterial.PrepareVertexLayout(Stride.Particles.ParticlePoolFieldsList)">
  PrepareVertexLayout(ParticlePoolFieldsList)
  <a class="header-action link-secondary" title="View source" href="https://github.com/stride3d/stride/blob/locale-ru/sources/engine/Stride.Particles/Materials/ParticleMaterial.cs/#L45"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Prepares the material for drawing the current frame with the current <a class="xref" href="Stride.Particles.VertexLayouts.ParticleVertexBuilder.html">ParticleVertexBuilder</a> and <a class="xref" href="Stride.Particles.Sorters.ParticleList.html">ParticleList</a></p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual void PrepareVertexLayout(ParticlePoolFieldsList fieldsList)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>fieldsList</code> <a class="xref" href="Stride.Particles.ParticlePoolFieldsList.html">ParticlePoolFieldsList</a></dt>
    <dd><p>A container for the <a class="xref" href="Stride.Particles.ParticlePool.html">ParticlePool</a> which can poll if a certain field exists as an attribute</p>
</dd>
  </dl>












  <a id="Stride_Particles_Materials_ParticleMaterial_Setup_" data-uid="Stride.Particles.Materials.ParticleMaterial.Setup*"></a>

  <h3 id="Stride_Particles_Materials_ParticleMaterial_Setup_Stride_Rendering_RenderContext_" data-uid="Stride.Particles.Materials.ParticleMaterial.Setup(Stride.Rendering.RenderContext)">
  Setup(RenderContext)
  <a class="header-action link-secondary" title="View source" href="https://github.com/stride3d/stride/blob/locale-ru/sources/engine/Stride.Particles/Materials/ParticleMaterial.cs/#L69"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Setups the current material using the graphics device.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual void Setup(RenderContext context)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>context</code> <a class="xref" href="Stride.Rendering.RenderContext.html">RenderContext</a></dt>
    <dd></dd>
  </dl>












  <a id="Stride_Particles_Materials_ParticleMaterial_SetupPipeline_" data-uid="Stride.Particles.Materials.ParticleMaterial.SetupPipeline*"></a>

  <h3 id="Stride_Particles_Materials_ParticleMaterial_SetupPipeline_Stride_Rendering_RenderContext_Stride_Graphics_PipelineStateDescription_" data-uid="Stride.Particles.Materials.ParticleMaterial.SetupPipeline(Stride.Rendering.RenderContext,Stride.Graphics.PipelineStateDescription)">
  SetupPipeline(RenderContext, PipelineStateDescription)
  <a class="header-action link-secondary" title="View source" href="https://github.com/stride3d/stride/blob/locale-ru/sources/engine/Stride.Particles/Materials/ParticleMaterial.cs/#L91"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Setup the pipeline state object.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual void SetupPipeline(RenderContext renderContext, PipelineStateDescription pipelineState)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>renderContext</code> <a class="xref" href="Stride.Rendering.RenderContext.html">RenderContext</a></dt>
    <dd></dd>
    <dt><code>pipelineState</code> <a class="xref" href="Stride.Graphics.PipelineStateDescription.html">PipelineStateDescription</a></dt>
    <dd></dd>
  </dl>












  <a id="Stride_Particles_Materials_ParticleMaterial_UpdateVertexBuilder_" data-uid="Stride.Particles.Materials.ParticleMaterial.UpdateVertexBuilder*"></a>

  <h3 id="Stride_Particles_Materials_ParticleMaterial_UpdateVertexBuilder_Stride_Particles_VertexLayouts_ParticleVertexBuilder_" data-uid="Stride.Particles.Materials.ParticleMaterial.UpdateVertexBuilder(Stride.Particles.VertexLayouts.ParticleVertexBuilder)">
  UpdateVertexBuilder(ParticleVertexBuilder)
  <a class="header-action link-secondary" title="View source" href="https://github.com/stride3d/stride/blob/locale-ru/sources/engine/Stride.Particles/Materials/ParticleMaterial.cs/#L54"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Updates the required fields for this frame in the vertex buffer builder.
If nothing has changed since the last frame and the vertex layout is the same, do not add any new required fields</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual void UpdateVertexBuilder(ParticleVertexBuilder vertexBuilder)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>vertexBuilder</code> <a class="xref" href="Stride.Particles.VertexLayouts.ParticleVertexBuilder.html">ParticleVertexBuilder</a></dt>
    <dd><p>The target vertex buffer builder</p>
</dd>
  </dl>












  <a id="Stride_Particles_Materials_ParticleMaterial_ValidateEffect_" data-uid="Stride.Particles.Materials.ParticleMaterial.ValidateEffect*"></a>

  <h3 id="Stride_Particles_Materials_ParticleMaterial_ValidateEffect_Stride_Rendering_RenderContext_Stride_Rendering_EffectValidator__" data-uid="Stride.Particles.Materials.ParticleMaterial.ValidateEffect(Stride.Rendering.RenderContext,Stride.Rendering.EffectValidator@)">
  ValidateEffect(RenderContext, ref EffectValidator)
  <a class="header-action link-secondary" title="View source" href="https://github.com/stride3d/stride/blob/locale-ru/sources/engine/Stride.Particles/Materials/ParticleMaterial.cs/#L59"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"></div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public virtual void ValidateEffect(RenderContext context, ref EffectValidator effectValidator)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>context</code> <a class="xref" href="Stride.Rendering.RenderContext.html">RenderContext</a></dt>
    <dd></dd>
    <dt><code>effectValidator</code> <a class="xref" href="Stride.Rendering.EffectValidator.html">EffectValidator</a></dt>
    <dd></dd>
  </dl>













</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/stride3d/stride/blob/locale-ru/sources/engine/Stride.Particles/Materials/ParticleMaterial.cs/#L17" class="edit-link">Edit this page</a>
        </div>


      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <div class="d-flex flex-column flex-sm-row justify-content-between pt-1 text-center small"><p>Supported by the <a href="https://dotnetfoundation.org/" target="_blank" rel="noopener">.NET Foundation</a></p><p>Made with <a href="https://dotnet.github.io/docfx">docfx</a></p><p>Stride Docs Website v.2.0.0.3</p><p>&copy; .NET Foundation and Contributors</p></div>
        </div>
      </div>
    </footer>
  </body>
</html>
